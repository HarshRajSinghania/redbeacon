<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RedBeacon C2 - Dashboard</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="vignette"></div>
  <header class="header">
    <div class="brand">RedBeacon<span>C2</span></div>
    <nav class="nav">
      <button id="refreshBtn" class="btn btn-primary">Refresh</button>
      <input id="adminToken" type="password" placeholder="X-Admin-Token" />
    </nav>
  </header>

  <main class="container">
    <section class="panel">
      <h2>Create Task</h2>
      <div class="form-grid">
        <div>
          <label>Agent</label>
          <select id="agentSelect"></select>
        </div>
        <div>
          <label>Type</label>
          <select id="typeSelect">
            <option value="inventory">inventory</option>
            <option value="metrics">metrics</option>
            <option value="logs">logs</option>
            <option value="exec">exec</option>
            <option value="processes_list">processes_list</option>
            <option value="network_info">network_info</option>
            <option value="open_ports">open_ports</option>
            <option value="uptime">uptime</option>
            <option value="user_sessions">user_sessions</option>
            <option value="disk_usage_detail">disk_usage_detail</option>
            <option value="file_stat">file_stat</option>
            <option value="file_checksum">file_checksum</option>
            <option value="file_fetch">file_fetch</option>
            <option value="path_exists_glob">path_exists_glob</option>
            <option value="env_vars">env_vars</option>
          </select>
        </div>
        <div class="full">
          <label>Payload (JSON)</label>
          <textarea id="payloadInput" rows="6" class="code" placeholder="{ }"></textarea>
        </div>
        <div class="actions full">
          <button id="presetBtn" class="btn">Insert preset</button>
          <button id="createTaskBtn" class="btn btn-primary">Create Task</button>
        </div>
      </div>
      <div class="hints">
        <div class="badge">Tip</div>
        Use the preset to auto-fill a safe example, then tweak the payload.
      </div>
    </section>
    <section class="panel">
      <h2>Agents</h2>
      <div id="agents" class="grid"></div>
    </section>

    <section class="panel">
      <h2>Tasks</h2>
      <div class="toolbar">
        <select id="taskAgentFilter"><option value="">All agents</option></select>
        <input id="taskTypeFilter" type="text" placeholder="Filter by type (e.g., metrics)" />
      </div>
      <div id="tasks" class="grid"></div>
    </section>

    <section class="panel">
      <h2>Recent Results</h2>
      <div class="toolbar">
        <select id="resultAgentFilter"><option value="">All agents</option></select>
        <input id="resultTypeFilter" type="text" placeholder="Filter by type (client-side)" />
        <select id="resultLimit">
          <option value="25">Last 25</option>
          <option value="50" selected>Last 50</option>
          <option value="100">Last 100</option>
        </select>
      </div>
      <div id="results" class="list"></div>
    </section>
  </main>

  <footer class="footer">
    <div>Â© RedBeacon C2</div>
    <div class="pulse"></div>
  </footer>

  <script src="/static/app.js"></script>
</body>
</html>
